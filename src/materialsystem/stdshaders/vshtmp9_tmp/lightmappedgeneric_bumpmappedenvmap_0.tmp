vs.1.1																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(1)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(5)
; Shader specific constant:																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(6)
;	 c43	 = [sOffset, tOffset, 0, 0]																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(7)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(8)
;------------------------------------																								; LINEINFO(macros.vsh)(1)
; RULES FOR AUTHORING VERTEX SHADERS:																								; LINEINFO(macros.vsh)(2)
;------------------------------------																								; LINEINFO(macros.vsh)(3)
; - never use "def" . . .set constants in code instead. . our constant shadowing will break otherwise.																								; LINEINFO(macros.vsh)(4)
;	(same goes for pixel shaders)																								; LINEINFO(macros.vsh)(5)
; - use cN notation instead of c[N] notation. .makes grepping for registers easier.																								; LINEINFO(macros.vsh)(6)
;   The only exception is c[a0.x+blah] where you have no choice.																								; LINEINFO(macros.vsh)(7)
; NOTE: These must match the same values in vsh_prep.pl!																								; LINEINFO(macros.vsh)(10)
dcl_position v0;																								; LINEINFO(macros.vsh)(29)
dcl_normal v3;																								; LINEINFO(macros.vsh)(42)
dcl_texcoord0 v7;																								; LINEINFO(macros.vsh)(54)
dcl_tangent v11;																								; LINEINFO(macros.vsh)(70)
dcl_binormal0 v12;																								; LINEINFO(macros.vsh)(74)
; NOTE: These must match the same values in vsh_prep.pl!																								; LINEINFO(macros.vsh)(111)
; currently unused																								; LINEINFO(macros.vsh)(122)
; c12, c13																								; LINEINFO(macros.vsh)(123)
; c14 is c14																								; LINEINFO(macros.vsh)(174)
; c15 is c15																								; LINEINFO(macros.vsh)(175)
; There are 16 model matrices for skinning																								; LINEINFO(macros.vsh)(177)
; NOTE: These must match the same values in vsh_prep.pl!																								; LINEINFO(macros.vsh)(178)
; pass in a reference to a var that contains a register. . ie $var where var will constain "r1", etc																								; LINEINFO(macros.vsh)(219)
;------------------------------------------------------------------------------																								; LINEINFO(macros.vsh)(472)
; Main fogging routine																								; LINEINFO(macros.vsh)(473)
;------------------------------------------------------------------------------																								; LINEINFO(macros.vsh)(474)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(12)
; Vertex blending																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(13)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(14)
; AllocateRegister $worldPos = r0																								; LINEINFO(macros.vsh)(208)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldPos = r0																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
; Transform position from object to world																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(18)
dp4 r0.x, v0, c48																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(19)
dp4 r0.y, v0, c49																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(20)
dp4 r0.z, v0, c50																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(21)
; AllocateRegister $projPos = r1																								; LINEINFO(macros.vsh)(208)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldPos = r0																								; LINEINFO(macros.vsh)(191)
; $projPos = r1																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
; Transform position from object to projection space																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(25)
dp4 r1.x, v0, c4																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(26)
dp4 r1.y, v0, c5																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(27)
dp4 r1.z, v0, c6																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(28)
dp4 r1.w, v0, c7																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(29)
mov oPos, r1																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(31)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(33)
; Fog																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(34)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(35)
; CalcFog																								; LINEINFO(macros.vsh)(493)
;------------------------------																								; LINEINFO(macros.vsh)(323)
; Regular range fog																								; LINEINFO(macros.vsh)(324)
;------------------------------																								; LINEINFO(macros.vsh)(325)
; oFog.x = 1.0f = no fog																								; LINEINFO(macros.vsh)(327)
; oFog.x = 0.0f = full fog																								; LINEINFO(macros.vsh)(328)
; compute fog factor f = (fog_end - dist)*(1/(fog_end-fog_start))																								; LINEINFO(macros.vsh)(329)
; this is == to: (fog_end/(fog_end-fog_start) - dist/(fog_end-fog_start)																								; LINEINFO(macros.vsh)(330)
; which can be expressed with a single mad instruction!																								; LINEINFO(macros.vsh)(331)
; Compute |projPos|																								; LINEINFO(macros.vsh)(333)
; AllocateRegister $tmp = r2																								; LINEINFO(macros.vsh)(208)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldPos = r0																								; LINEINFO(macros.vsh)(191)
; $projPos = r1																								; LINEINFO(macros.vsh)(191)
; $tmp = r2																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
mad r2, -r1.w, c16.w, c16.x																								; LINEINFO(macros.vsh)(339)
min r2, r2, c0.y																								; LINEINFO(macros.vsh)(340)
max oFog, r2.x, c16.z																								; LINEINFO(macros.vsh)(341)
; FreeRegister $tmp = r2																								; LINEINFO(macros.vsh)(224)
;	if( $tmp ne g_allocatedname[r2] )																								; LINEINFO(macros.vsh)(232)
;	{																								; LINEINFO(macros.vsh)(233)
;		; Error freeing r2																								; LINEINFO(macros.vsh)(234)
;		mov compileerror, freed unallocated register $tmp																								; LINEINFO(macros.vsh)(235)
;	}																								; LINEINFO(macros.vsh)(236)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldPos = r0																								; LINEINFO(macros.vsh)(191)
; $projPos = r1																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
; FreeRegister $projPos = r1																								; LINEINFO(macros.vsh)(224)
;	if( $projPos ne g_allocatedname[r1] )																								; LINEINFO(macros.vsh)(232)
;	{																								; LINEINFO(macros.vsh)(233)
;		; Error freeing r1																								; LINEINFO(macros.vsh)(234)
;		mov compileerror, freed unallocated register $projPos																								; LINEINFO(macros.vsh)(235)
;	}																								; LINEINFO(macros.vsh)(236)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldPos = r0																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(40)
; Lighting																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(41)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(42)
; Transform tangent space basis vectors to env map space (world space)																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(44)
; This will produce a set of vectors mapping from tangent space to env space																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(45)
; We'll use this to transform normals from the normal map from tangent space																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(46)
; to environment map space. 																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(47)
; NOTE: use dp3 here since the basis vectors are vectors, not points																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(48)
dp3 oT1.x, v11, c48																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(50)
dp3 oT2.x, v11, c49																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(51)
dp3 oT3.x, v11, c50																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(52)
dp3 oT1.y, v12, c48																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(54)
dp3 oT2.y, v12, c49																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(55)
dp3 oT3.y, v12, c50																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(56)
dp3 oT1.z, v3, c48																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(58)
dp3 oT2.z, v3, c49																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(59)
dp3 oT3.z, v3, c50																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(60)
; Compute the vector from vertex to camera																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(62)
; AllocateRegister $worldEyeVect = r1																								; LINEINFO(macros.vsh)(208)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldPos = r0																								; LINEINFO(macros.vsh)(191)
; $worldEyeVect = r1																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
sub r1.xyz, c2, r0																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(64)
; FreeRegister $worldPos = r0																								; LINEINFO(macros.vsh)(224)
;	if( $worldPos ne g_allocatedname[r0] )																								; LINEINFO(macros.vsh)(232)
;	{																								; LINEINFO(macros.vsh)(233)
;		; Error freeing r0																								; LINEINFO(macros.vsh)(234)
;		mov compileerror, freed unallocated register $worldPos																								; LINEINFO(macros.vsh)(235)
;	}																								; LINEINFO(macros.vsh)(236)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $worldEyeVect = r1																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
; Move it into the w component of the texture coords, as the wacky																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(67)
; pixel shader wants it there.																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(68)
mov oT1.w, r1.x																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(69)
mov oT2.w, r1.y																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(70)
mov oT3.w, r1.z																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(71)
; AllocateRegister $tangentEyeVect = r0																								; LINEINFO(macros.vsh)(208)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $tangentEyeVect = r0																								; LINEINFO(macros.vsh)(191)
; $worldEyeVect = r1																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
; transform the eye vector to tangent space																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(75)
dp3 r0.x, r1, v11																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(76)
dp3 r0.y, r1, v12																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(77)
dp3 r0.z, r1, v3																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(78)
; FreeRegister $worldEyeVect = r1																								; LINEINFO(macros.vsh)(224)
;	if( $worldEyeVect ne g_allocatedname[r1] )																								; LINEINFO(macros.vsh)(232)
;	{																								; LINEINFO(macros.vsh)(233)
;		; Error freeing r1																								; LINEINFO(macros.vsh)(234)
;		mov compileerror, freed unallocated register $worldEyeVect																								; LINEINFO(macros.vsh)(235)
;	}																								; LINEINFO(macros.vsh)(236)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
; $tangentEyeVect = r0																								; LINEINFO(macros.vsh)(191)
;																								; LINEINFO(macros.vsh)(194)
dp3 r0.w, r0, r0																								; LINEINFO(macros.vsh)(262)
rsq r0.w, r0.w																								; LINEINFO(macros.vsh)(263)
mul r0, r0, r0.w																								; LINEINFO(macros.vsh)(264)
; stick the tangent space eye vector into oD0																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(84)
mad oD0.xyz, r0, c0.w, c0.w																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(85)
; FreeRegister $tangentEyeVect = r0																								; LINEINFO(macros.vsh)(224)
;	if( $tangentEyeVect ne g_allocatedname[r0] )																								; LINEINFO(macros.vsh)(232)
;	{																								; LINEINFO(macros.vsh)(233)
;		; Error freeing r0																								; LINEINFO(macros.vsh)(234)
;		mov compileerror, freed unallocated register $tangentEyeVect																								; LINEINFO(macros.vsh)(235)
;	}																								; LINEINFO(macros.vsh)(236)
; USED REGISTERS																								; LINEINFO(macros.vsh)(186)
;																								; LINEINFO(macros.vsh)(194)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(89)
; Texture coordinates																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(90)
;------------------------------------------------------------------------------																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(91)
dp4 oT0.x, v7, c38																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(92)
dp4 oT0.y, v7, c39																								; LINEINFO(lightmappedgeneric_bumpmappedenvmap.vsh)(93)
